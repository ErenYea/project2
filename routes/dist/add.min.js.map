{"version":3,"sources":["add.js"],"names":["express","require","router","Router","mysqlConnection","res","next","name","console","ob","req","body","log","Object","getOwnPropertyNames","length","key","value","keys","query","concat","err","rows","fields","send","tablename","data","cond","main","id","render","redirect","title","module","exports"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SAEfC,gBAAkBH,QAAQ,kBAAhCC,OAAME,KAAAA,IAAAA,SAAkBH,EAAQI,EAAAC,GAGhCJ,IAMMK,EADJC,EALIC,EAANC,EAAAC,KAME,GAFAH,QAAAI,IAAAH,GAEA,GAAAI,OAAAC,oBAAAL,GAAAM,OAIE,IAAIC,OAAOP,EAFVI,EAAAA,IAEDI,EAAAR,EAAAO,UAGCT,EAAAM,OAAAK,KAAAT,GAAA,GALHQ,EAMKR,EAAAI,OAAAK,KAAAT,GAAA,IAOL,GAAU,OAAPQ,EAAHb,gBAAAe,MAAA,+IAAAC,OAOWb,EAPX,KAOW,SAAAc,EAAAC,EAAAC,GAAPF,EAGEhB,EAAAmB,KAAAH,GAC4BI,EAAAA,OAAS,MAApB,CAAAC,KAAAJ,EAAAG,UAAAlB,EAAAoB,KAAA,eATrB,GAAA,QAAAlB,EAAAI,OAAAK,KAAAT,GAAA,IAFFL,gBAemBe,MAfnB,qIAAAC,OAoBMX,EAAAgB,UApBN,KAoBM,SAAAJ,EAAAC,EAAAC,GADA,IAAIK,EAAKN,EAGPlB,gBAAAe,MAAA,iBAAAC,OAAAX,EAAAgB,UAAA,WAAAL,OAAAX,EAAAoB,GAAA,GAAA,KAAAT,OAAAP,OAAAK,KAAAT,GAAA,IAAA,SAAAY,EAAAC,EAAAC,GAGAlB,GAAIyB,CAAAA,EAAOD,GAAA,GAAXhB,OAAiBK,KAAAT,GAAA,IAACiB,EAAII,OAAL,MAAA,CAAAJ,KAAAE,EAAAN,KAAAA,EAAAG,UAAAhB,EAAAgB,UAAAE,KAAA,OAAAE,GAAAA,cAAjB,GACA,UAAApB,EAAAI,OAAAK,KAAAT,GAAA,IACDL,gBANDe,MAMC,eAAAC,OANDX,EAAAgB,UAMC,WAAAL,OANDX,EAAAoB,GAAA,GAMC,KAAAT,OANDP,OAAAK,KAAAT,GAAA,IAAA,SAAAY,EAAAC,EAAAC,GALFF,EAcGhB,EAAGI,KAAGI,GAEJQ,EAAHU,SAAO,iBAGL1B,CACD,IAAAoB,EAAA,CAAAlB,GALHH,gBAAAe,MAAA,iBAAAC,OAAAb,GAAA,SAAAc,EAAAC,EAAAC,GADG,GAQFF,EACGI,EAAAA,KAASJ,OACbjB,CACMiB,IAAJK,EAAQ,CAAAJ,GACNjB,EAAImB,OAAJ,SAAA,CADFQ,MAEM,UACAN,KAAIA,EACJI,WAAOL,EACTO,KAAM,eAclBC,OAAOC,QAAUhC","file":"add.min.js","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\n// const confirm = require('confirm-dialog');\r\nconst mysqlConnection = require(\"./mysqlconn.js\");\r\n\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n  // console.log(\"added\")\r\n  var ob = req.body\r\n  // var id = req.params;\r\n  // console.log(id)\r\n  console.log(ob)\r\n  var name;\r\n  var value;\r\n  if(Object.getOwnPropertyNames(ob).length == 1){\r\n    \r\n    for(key in ob){\r\n      name=key\r\n      value=ob[key]\r\n    }\r\n  }else{\r\n    name= Object.keys(ob)[0]\r\n    value=ob[Object.keys(ob)[0]]\r\n  }\r\n  \r\n  // console.log(name)\r\n  // console.log(value)\r\n  if(value==\"ADD\"){\r\n    // console.log('hello')\r\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \r\n       IS_NULLABLE \r\n    from INFORMATION_SCHEMA.COLUMNS\r\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\r\n\r\n      if(err){\r\n        res.send(err)\r\n      }else{\r\n        // console.log(rows)\r\n        res.render(\"add\",{data:rows,tablename:name,cond:'add'});\r\n        // res.send(rows)\r\n      }\r\n    });\r\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\r\n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\r\n      from INFORMATION_SCHEMA.COLUMNS\r\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\r\n        var main=rows;\r\n        // console.log(rows)\r\n        mysqlConnection.query(`select * from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n          // console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\r\n          // console.log(rows)\r\n          id = [ob.id[0],Object.keys(ob)[0]]\r\n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\r\n          // res.send(rows);\r\n        })\r\n      })\r\n      \r\n  } else if(ob[Object.keys(ob)[0]]=='DELETE'){\r\n      mysqlConnection.query(`delete from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n        if(err){\r\n          res.send(err)\r\n        }else{\r\n          res.redirect('/tables')\r\n        }\r\n      })\r\n  }else{\r\n      var tablename=[name]\r\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\r\n        if (err){\r\n          res.send(err)\r\n        } else{\r\n          var data =[rows]\r\n          res.render(\"tables\",{\r\n            title:\"Express\",\r\n            data:data,\r\n            tablenames:tablename,\r\n            cond:\"view\"\r\n          })\r\n        }\r\n      });\r\n  }\r\n  \r\n})\r\n  \r\n    \r\n\r\n\r\nmodule.exports = router;"]}