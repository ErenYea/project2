{"version":3,"sources":["add.js"],"names":["express","require","router","Router","mysqlConnection","req","res","next","ob","value","console","log","Object","getOwnPropertyNames","length","name","key","keys","query","concat","err","rows","fields","send","main","slice","data","tablename","cond","_typeof","id","condition","render","tablenames","module","exports"],"mappings":"8PAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SAEfC,gBAAkBH,QAAQ,kBAFhCC,OAAIA,KAAM,IAAGF,SAAAK,EACbC,EAAAC,GACA,IAKMC,EAEJC,EAPIL,EAAAA,EAAAA,KAWJ,GAPAM,QAAAC,IAAAH,GAO4C,GAAzCI,OAAOC,oBAAoBL,GAAIM,OAFlC,IAAIC,OAAJP,EACIC,EAAJO,IAKIP,EAAMD,EAAGQ,UADTD,EAAIH,OAAJK,KAAAT,GAAA,GACAC,EAAAA,EAAKG,OAAGK,KAART,GAAA,IAKH,GAED,OAAAC,EACAC,QAAAC,IAAA,SAGEP,gBAAgBc,MAAhB,+IAAAC,OADAJ,EACA,KADA,SAAAK,EAAAC,EAAAC,GAME,GAAAF,EACEd,EAAIiB,KAAKH,OADX,CAGE,GAAG,SAAHR,OAASK,KAANT,GAAA,GACD,IAAIgB,EAAIH,EAACA,MAAKI,EAAM,QAEhBD,EAAIH,EAEVX,QAAQC,IAAIa,GAAZd,EAAAA,OAAA,MAAA,CAAAgB,KAAAF,EAAAG,UAAAZ,EAAAa,KAAA,gBAC2CA,GAAK,QAALA,EAAIhB,OAACK,KAAAT,GAAA,IAEjDJ,gBAAAc,MAAA,qIAAAC,OAEeF,EAAKT,UAFpB,KAE6B,SAAAY,EAAOC,EAAAC,GAErClB,GAGKgB,EAAHG,KAAOH,GAIP,IAAII,EAAKH,EAGT,GADAX,QAAQC,IAAIU,GACTQ,QAAOrB,EAAGsB,KAAVD,QAAsB,IAAI,CAA1B,IAAAE,EAAAvB,EAAAsB,GAAA,GACDA,GAAIC,CAAAA,EAAAA,GAAS,GAAIvB,OAAjBS,KAAAT,GAAA,QACK,CACFuB,EAAAvB,EAAAsB,GACHA,GAAIC,CAAAA,EAAAA,GAASnB,OAAbK,KAAAT,GAAA,IAEDJ,gBAAAc,MAAA,iBAAAC,OAAAX,EAAAmB,UAAA,WAAAR,OAAAY,EAAA,KAAAZ,OAAAP,OAAAK,KAAAT,GAAA,IAAA,SAAAY,EAAAC,EAAAC,GAECZ,QAAQC,IAAR,iBAAAQ,OAA6BX,EAAGmB,UAAhC,WAAAR,OAAmDV,EAAM,GAAzD,KAAAU,OAA+DP,OAAOK,KAAKT,GAAI,KAG/EF,EAAI0B,OAAO,MAAM,CAACN,KAAKF,EAAKH,KAAKA,EAAKM,UAAUnB,EAAGmB,UAAUC,KAAK,OAAOE,GAAGA,cAAfF,GAA5C,UAA4CA,EAAIhB,OAAhDK,KAAAT,GAAA,IAAwDsB,gBAAGA,MAAHA,eAAAA,OAAGA,EAAAA,UAAHA,WAAAA,OAAGA,EAAAA,GAAAA,GAAHA,KAAAA,OAAGA,OAAAA,KAAAA,GAAAA,IAAAA,SAAAA,EAAAA,EAAAA,GAJoCV,EAAlHd,EAAAiB,KAAAH,GASCd,EAAGE,SAAUS,iBAGZX,CACD,IAFDqB,EAEK,CAAAZ,GACHT,gBAAaY,MAAbZ,iBAAAA,OAAAS,GAAA,SAAAK,EAAAC,EAAAC,GACD,GAAAF,EALHd,EAAAiB,KAAAH,OAOC,CACGO,IAAAA,EAAU,CAACZ,GACfX,EAAAA,OAAgBc,SAAhB,CACME,MAAI,UACFG,KAAKH,EADXa,WAEMN,EACAD,KAAI,eAgBlBQ,OAAOC,QAAUjC","file":"add.min.js","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\n// const confirm = require('confirm-dialog');\r\nconst mysqlConnection = require(\"./mysqlconn.js\");\r\n\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n  // console.log(\"added\")\r\n  var ob = req.body\r\n  // var id = req.params;\r\n  // console.log(id)\r\n  console.log(ob)\r\n  var name;\r\n  var value;\r\n  if(Object.getOwnPropertyNames(ob).length == 1){\r\n    \r\n    for(key in ob){\r\n      name=key\r\n      value=ob[key]\r\n    }\r\n  }else{\r\n    name= Object.keys(ob)[0]\r\n    value=ob[Object.keys(ob)[0]]\r\n  }\r\n  \r\n  // console.log(name)\r\n  // console.log(value)\r\n  if(value==\"ADD\"){\r\n    console.log('hello')\r\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \r\n       IS_NULLABLE \r\n    from INFORMATION_SCHEMA.COLUMNS\r\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\r\n\r\n      if(err){\r\n        res.send(err)\r\n      }else{\r\n        if(Object.keys(ob)[0]==\"users\"){\r\n          var main=rows.slice(0,2);\r\n        }else{\r\n          var main=rows;\r\n        }\r\n        console.log(main)\r\n        res.render(\"add\",{data:main,tablename:name,cond:'add'});\r\n        // res.send(rows)\r\n      }\r\n    });\r\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\r\n      \r\n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\r\n      from INFORMATION_SCHEMA.COLUMNS\r\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\r\n        if(err){\r\n          res.send(err)\r\n        }\r\n        \r\n        var main=rows;\r\n        \r\n        console.log(rows)\r\n        if(typeof(ob.id)==typeof([])){\r\n          var condition =  ob.id[0];\r\n          id = [ob.id[0],Object.keys(ob)[0]]\r\n        }else{\r\n          var condition = ob.id;\r\n          id = [ob.id,Object.keys(ob)[0]]\r\n        }\r\n        mysqlConnection.query(`select * from ${ob.tablename} where ${condition}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n          console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\r\n          // console.log(rows)\r\n          \r\n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\r\n          // res.send(rows);\r\n        })\r\n      })\r\n      \r\n  } else if(ob[Object.keys(ob)[0]]=='DELETE'){\r\n      mysqlConnection.query(`delete from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n        if(err){\r\n          res.send(err)\r\n        }else{\r\n          res.redirect('/tables')\r\n        }\r\n      })\r\n  }else{\r\n      var tablename=[name]\r\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\r\n        if (err){\r\n          res.send(err)\r\n        } else{\r\n          var data =[rows]\r\n          res.render(\"tables\",{\r\n            title:\"Express\",\r\n            data:data,\r\n            tablenames:tablename,\r\n            cond:\"view\"\r\n          })\r\n        }\r\n      });\r\n  }\r\n  \r\n})\r\n  \r\n    \r\n\r\n\r\nmodule.exports = router;"]}