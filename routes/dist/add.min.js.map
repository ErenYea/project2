{"version":3,"sources":["add.js"],"names":["express","require","router","Router","mysqlConnection","req","res","next","ob","value","console","log","Object","getOwnPropertyNames","length","name","key","keys","query","concat","err","rows","fields","send","main","slice","shift","render","data","tablename","cond","condition","id","redirect","tablenames","selectbox","search","select","module","exports"],"mappings":"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","file":"add.min.js","sourcesContent":["var express = require(\"express\");\nvar router = express.Router();\n// const confirm = require('confirm-dialog');\nconst mysqlConnection = require(\"./mysqlconn.js\");\n\n\nrouter.post(\"/\", function (req, res,next) {\n  // console.log(\"added\")\n  var ob = req.body\n  // var id = req.params;\n  // console.log(id)\n  console.log(ob)\n  var name;\n  var value;\n  if(Object.getOwnPropertyNames(ob).length == 1){\n    \n    for(key in ob){\n      name=key\n      value=ob[key]\n    }\n  }else{\n    name= Object.keys(ob)[0]\n    value=ob[Object.keys(ob)[0]]\n  }\n  \n  // console.log(name)\n  // console.log(value)\n  if(value==\"ADD\"){\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \n       IS_NULLABLE \n    from INFORMATION_SCHEMA.COLUMNS\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\n\n      if(err){\n        res.send(err)\n      }else{\n        if(Object.keys(ob)[0]==\"users\"){\n          var main=rows.slice(0,2);\n        }else{\n          var main=rows;\n        }\n        rows.shift()\n        res.render(\"add\",{data:main,tablename:name,cond:'add'});\n      }\n    });\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\n      \n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\n      from INFORMATION_SCHEMA.COLUMNS\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\n        if(err){\n          res.send(err)\n        }\n        \n        var main=rows;\n        \n        console.log(rows)\n        if(typeof(ob.id)==typeof([])){\n          var condition =  ob.id[0];\n          id = [ob.id[0],Object.keys(ob)[0]]\n        }else{\n          var condition = ob.id;\n          id = [ob.id,Object.keys(ob)[0]]\n        }\n        mysqlConnection.query(`select * from ${ob.tablename} where ${condition}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\n          console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\n          // console.log(rows)\n          \n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\n          // res.send(rows);\n        })\n      })\n      \n  } else if(ob[Object.keys(ob)[0]]=='DELETE'){\n      mysqlConnection.query(`delete from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\n        if(err){\n          res.send(err)\n        }else{\n          res.redirect('/tables')\n        }\n      })\n  }else if(ob[Object.keys(ob)[0]]=='VIEW'){\n      var tablename=[name]\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\n        if (err){\n          res.send(err)\n        } else{\n          var data =[rows]\n          res.render(\"tables\",{\n            title:\"Express\",\n            data:data,\n            tablenames:tablename,\n            cond:\"view\"\n          })\n        }\n      });\n  }else{\n    var tablename=ob.tablename;\n    var select=ob.selectbox;\n    var search=ob.search;\n    var id= ob.id[0];\n    mysqlConnection.query(`SELECT * from ${tablename} where ${select}='${search}'`,(err,rows,fields)=>{\n      if(err){\n        res.send(err)\n      }else{\n        var data =[rows]\n        res.render(\"tables\",{\n          title:\"Express\",\n          data:data,\n          tablenames:[tablename],\n          cond:\"view\"\n        })\n      }\n    })\n    // res.send(ob);\n    \n  }\n  \n})\n  \n    \n\n\nmodule.exports = router;"]}