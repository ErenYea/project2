{"version":3,"sources":["add.js"],"names":["express","require","router","Router","mysqlConnection","post","req","res","next","ob","body","console","log","name","value","Object","getOwnPropertyNames","length","key","keys","query","err","rows","fields","send","render","data","tablename","cond","main","id","redirect","title","tablenames","module","exports"],"mappings":"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","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\n// const confirm = require('confirm-dialog');\r\nconst mysqlConnection = require(\"./mysqlconn.js\");\r\n\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n  // console.log(\"added\")\r\n  var ob = req.body\r\n  // var id = req.params;\r\n  // console.log(id)\r\n  console.log(ob)\r\n  var name;\r\n  var value;\r\n  if(Object.getOwnPropertyNames(ob).length == 1){\r\n    \r\n    for(key in ob){\r\n      name=key\r\n      value=ob[key]\r\n    }\r\n  }else{\r\n    name= Object.keys(ob)[0]\r\n    value=ob[Object.keys(ob)[0]]\r\n  }\r\n  \r\n  // console.log(name)\r\n  // console.log(value)\r\n  if(value==\"ADD\"){\r\n    // console.log('hello')\r\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \r\n       IS_NULLABLE \r\n    from INFORMATION_SCHEMA.COLUMNS\r\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\r\n\r\n      if(err){\r\n        res.send(err)\r\n      }else{\r\n        // console.log(rows)\r\n        res.render(\"add\",{data:rows,tablename:name,cond:'add'});\r\n        // res.send(rows)\r\n      }\r\n    });\r\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\r\n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\r\n      from INFORMATION_SCHEMA.COLUMNS\r\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\r\n        var main=rows;\r\n        // console.log(rows)\r\n        mysqlConnection.query(`select * from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n          // console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\r\n          // console.log(rows)\r\n          id = [ob.id[0],Object.keys(ob)[0]]\r\n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\r\n          // res.send(rows);\r\n        })\r\n      })\r\n      \r\n  } else if(ob[Object.keys(ob)[0]]=='DELETE'){\r\n      mysqlConnection.query(`delete from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n        if(err){\r\n          res.send(err)\r\n        }else{\r\n          res.redirect('/tables')\r\n        }\r\n      })\r\n  }else{\r\n      var tablename=[name]\r\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\r\n        if (err){\r\n          res.send(err)\r\n        } else{\r\n          var data =[rows]\r\n          res.render(\"tables\",{\r\n            title:\"Express\",\r\n            data:data,\r\n            tablenames:tablename,\r\n            cond:\"view\"\r\n          })\r\n        }\r\n      });\r\n  }\r\n  \r\n})\r\n  \r\n    \r\n\r\n\r\nmodule.exports = router;"],"file":"add.dev.js"}