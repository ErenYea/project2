{"version":3,"sources":["add.js"],"names":["express","require","router","Router","mysqlConnection","post","req","res","next","ob","body","console","log","name","value","Object","getOwnPropertyNames","length","key","keys","query","err","rows","fields","send","main","slice","shift","render","data","tablename","cond","id","condition","redirect","title","tablenames","select","selectbox","search","module","exports"],"mappings":";;;;AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb,C,CACA;;AACA,IAAMC,eAAe,GAAGH,OAAO,CAAC,gBAAD,CAA/B;;AAGAC,MAAM,CAACG,IAAP,CAAY,GAAZ,EAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAmBC,IAAnB,EAAyB;AACxC;AACA,MAAIC,EAAE,GAAGH,GAAG,CAACI,IAAb,CAFwC,CAGxC;AACA;;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,EAAZ;AACA,MAAII,IAAJ;AACA,MAAIC,KAAJ;;AACA,MAAGC,MAAM,CAACC,mBAAP,CAA2BP,EAA3B,EAA+BQ,MAA/B,IAAyC,CAA5C,EAA8C;AAE5C,SAAIC,GAAJ,IAAWT,EAAX,EAAc;AACZI,MAAAA,IAAI,GAACK,GAAL;AACAJ,MAAAA,KAAK,GAACL,EAAE,CAACS,GAAD,CAAR;AACD;AACF,GAND,MAMK;AACHL,IAAAA,IAAI,GAAEE,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAN;AACAK,IAAAA,KAAK,GAACL,EAAE,CAACM,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAD,CAAR;AACD,GAjBuC,CAmBxC;AACA;;;AACA,MAAGK,KAAK,IAAE,KAAV,EAAgB;AACdV,IAAAA,eAAe,CAACgB,KAAhB,uJAGoBP,IAHpB,QAG4B,UAACQ,GAAD,EAAKC,IAAL,EAAUC,MAAV,EAAmB;AAE7C,UAAGF,GAAH,EAAO;AACLd,QAAAA,GAAG,CAACiB,IAAJ,CAASH,GAAT;AACD,OAFD,MAEK;AACH,YAAGN,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,KAAoB,OAAvB,EAA+B;AAC7B,cAAIgB,IAAI,GAACH,IAAI,CAACI,KAAL,CAAW,CAAX,EAAa,CAAb,CAAT;AACD,SAFD,MAEK;AACH,cAAID,IAAI,GAACH,IAAT;AACD;;AACDA,QAAAA,IAAI,CAACK,KAAL;AACApB,QAAAA,GAAG,CAACqB,MAAJ,CAAW,KAAX,EAAiB;AAACC,UAAAA,IAAI,EAACJ,IAAN;AAAWK,UAAAA,SAAS,EAACjB,IAArB;AAA0BkB,UAAAA,IAAI,EAAC;AAA/B,SAAjB;AACD;AACF,KAhBD;AAiBD,GAlBD,MAkBO,IAAGtB,EAAE,CAACM,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAD,CAAF,IAAwB,MAA3B,EAAkC;AAErCL,IAAAA,eAAe,CAACgB,KAAhB,6IAEoBX,EAAE,CAACqB,SAFvB,QAEoC,UAACT,GAAD,EAAKC,IAAL,EAAUC,MAAV,EAAmB;AACrD,UAAGF,GAAH,EAAO;AACLd,QAAAA,GAAG,CAACiB,IAAJ,CAASH,GAAT;AACD;;AAED,UAAII,IAAI,GAACH,IAAT;AAEAX,MAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ;;AACA,UAAG,QAAOb,EAAE,CAACuB,EAAV,aAAsB,EAAtB,CAAH,EAA6B;AAC3B,YAAIC,SAAS,GAAIxB,EAAE,CAACuB,EAAH,CAAM,CAAN,CAAjB;AACAA,QAAAA,EAAE,GAAG,CAACvB,EAAE,CAACuB,EAAH,CAAM,CAAN,CAAD,EAAUjB,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAV,CAAL;AACD,OAHD,MAGK;AACH,YAAIwB,SAAS,GAAGxB,EAAE,CAACuB,EAAnB;AACAA,QAAAA,EAAE,GAAG,CAACvB,EAAE,CAACuB,EAAJ,EAAOjB,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAP,CAAL;AACD;;AACDL,MAAAA,eAAe,CAACgB,KAAhB,yBAAuCX,EAAE,CAACqB,SAA1C,oBAA6DG,SAA7D,cAA0ElB,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAA1E,GAA+F,UAACY,GAAD,EAAKC,IAAL,EAAUC,MAAV,EAAmB;AAChHZ,QAAAA,OAAO,CAACC,GAAR,yBAA6BH,EAAE,CAACqB,SAAhC,oBAAmDhB,KAAK,CAAC,CAAD,CAAxD,cAA+DC,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAA/D,GADgH,CAEhH;;AAEAF,QAAAA,GAAG,CAACqB,MAAJ,CAAW,KAAX,EAAiB;AAACC,UAAAA,IAAI,EAACJ,IAAN;AAAWH,UAAAA,IAAI,EAACA,IAAhB;AAAqBQ,UAAAA,SAAS,EAACrB,EAAE,CAACqB,SAAlC;AAA4CC,UAAAA,IAAI,EAAC,MAAjD;AAAwDC,UAAAA,EAAE,EAACA;AAA3D,SAAjB,EAJgH,CAKhH;AACD,OAND;AAOD,KAxBD;AA0BH,GA5BM,MA4BA,IAAGvB,EAAE,CAACM,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAD,CAAF,IAAwB,QAA3B,EAAoC;AACvCL,IAAAA,eAAe,CAACgB,KAAhB,uBAAqCX,EAAE,CAACqB,SAAxC,oBAA2DrB,EAAE,CAACuB,EAAH,CAAM,CAAN,CAA3D,cAAuEjB,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAvE,GAA4F,UAACY,GAAD,EAAKC,IAAL,EAAUC,MAAV,EAAmB;AAC7G,UAAGF,GAAH,EAAO;AACLd,QAAAA,GAAG,CAACiB,IAAJ,CAASH,GAAT;AACD,OAFD,MAEK;AACHd,QAAAA,GAAG,CAAC2B,QAAJ,CAAa,SAAb;AACD;AACF,KAND;AAOH,GARM,MAQD,IAAGzB,EAAE,CAACM,MAAM,CAACI,IAAP,CAAYV,EAAZ,EAAgB,CAAhB,CAAD,CAAF,IAAwB,MAA3B,EAAkC;AACpC,QAAIqB,SAAS,GAAC,CAACjB,IAAD,CAAd;AACAT,IAAAA,eAAe,CAACgB,KAAhB,yBAAuCP,IAAvC,GAA8C,UAACQ,GAAD,EAAKC,IAAL,EAAUC,MAAV,EAAmB;AAC/D,UAAIF,GAAJ,EAAQ;AACNd,QAAAA,GAAG,CAACiB,IAAJ,CAASH,GAAT;AACD,OAFD,MAEM;AACJ,YAAIQ,IAAI,GAAE,CAACP,IAAD,CAAV;AACAf,QAAAA,GAAG,CAACqB,MAAJ,CAAW,QAAX,EAAoB;AAClBO,UAAAA,KAAK,EAAC,SADY;AAElBN,UAAAA,IAAI,EAACA,IAFa;AAGlBO,UAAAA,UAAU,EAACN,SAHO;AAIlBC,UAAAA,IAAI,EAAC;AAJa,SAApB;AAMD;AACF,KAZD;AAaH,GAfK,MAeD;AACH,QAAID,SAAS,GAACrB,EAAE,CAACqB,SAAjB;AACA,QAAIO,MAAM,GAAC5B,EAAE,CAAC6B,SAAd;AACA,QAAIC,MAAM,GAAC9B,EAAE,CAAC8B,MAAd;AACA,QAAIP,EAAE,GAAEvB,EAAE,CAACuB,EAAH,CAAM,CAAN,CAAR;AACA5B,IAAAA,eAAe,CAACgB,KAAhB,yBAAuCU,SAAvC,oBAA0DO,MAA1D,eAAqEE,MAArE,QAA+E,UAAClB,GAAD,EAAKC,IAAL,EAAUC,MAAV,EAAmB;AAChG,UAAGF,GAAH,EAAO;AACLd,QAAAA,GAAG,CAACiB,IAAJ,CAASH,GAAT;AACD,OAFD,MAEK;AACH,YAAIQ,IAAI,GAAE,CAACP,IAAD,CAAV;AACAf,QAAAA,GAAG,CAACqB,MAAJ,CAAW,QAAX,EAAoB;AAClBO,UAAAA,KAAK,EAAC,SADY;AAElBN,UAAAA,IAAI,EAACA,IAFa;AAGlBO,UAAAA,UAAU,EAAC,CAACN,SAAD,CAHO;AAIlBC,UAAAA,IAAI,EAAC;AAJa,SAApB;AAMD;AACF,KAZD,EALG,CAkBH;AAED;AAEF,CAhHD;AAqHAS,MAAM,CAACC,OAAP,GAAiBvC,MAAjB","sourcesContent":["var express = require(\"express\");\nvar router = express.Router();\n// const confirm = require('confirm-dialog');\nconst mysqlConnection = require(\"./mysqlconn.js\");\n\n\nrouter.post(\"/\", function (req, res,next) {\n  // console.log(\"added\")\n  var ob = req.body\n  // var id = req.params;\n  // console.log(id)\n  console.log(ob)\n  var name;\n  var value;\n  if(Object.getOwnPropertyNames(ob).length == 1){\n    \n    for(key in ob){\n      name=key\n      value=ob[key]\n    }\n  }else{\n    name= Object.keys(ob)[0]\n    value=ob[Object.keys(ob)[0]]\n  }\n  \n  // console.log(name)\n  // console.log(value)\n  if(value==\"ADD\"){\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \n       IS_NULLABLE \n    from INFORMATION_SCHEMA.COLUMNS\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\n\n      if(err){\n        res.send(err)\n      }else{\n        if(Object.keys(ob)[0]==\"users\"){\n          var main=rows.slice(0,2);\n        }else{\n          var main=rows;\n        }\n        rows.shift()\n        res.render(\"add\",{data:main,tablename:name,cond:'add'});\n      }\n    });\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\n      \n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\n      from INFORMATION_SCHEMA.COLUMNS\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\n        if(err){\n          res.send(err)\n        }\n        \n        var main=rows;\n        \n        console.log(rows)\n        if(typeof(ob.id)==typeof([])){\n          var condition =  ob.id[0];\n          id = [ob.id[0],Object.keys(ob)[0]]\n        }else{\n          var condition = ob.id;\n          id = [ob.id,Object.keys(ob)[0]]\n        }\n        mysqlConnection.query(`select * from ${ob.tablename} where ${condition}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\n          console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\n          // console.log(rows)\n          \n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\n          // res.send(rows);\n        })\n      })\n      \n  } else if(ob[Object.keys(ob)[0]]=='DELETE'){\n      mysqlConnection.query(`delete from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\n        if(err){\n          res.send(err)\n        }else{\n          res.redirect('/tables')\n        }\n      })\n  }else if(ob[Object.keys(ob)[0]]=='VIEW'){\n      var tablename=[name]\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\n        if (err){\n          res.send(err)\n        } else{\n          var data =[rows]\n          res.render(\"tables\",{\n            title:\"Express\",\n            data:data,\n            tablenames:tablename,\n            cond:\"view\"\n          })\n        }\n      });\n  }else{\n    var tablename=ob.tablename;\n    var select=ob.selectbox;\n    var search=ob.search;\n    var id= ob.id[0];\n    mysqlConnection.query(`SELECT * from ${tablename} where ${select}='${search}'`,(err,rows,fields)=>{\n      if(err){\n        res.send(err)\n      }else{\n        var data =[rows]\n        res.render(\"tables\",{\n          title:\"Express\",\n          data:data,\n          tablenames:[tablename],\n          cond:\"view\"\n        })\n      }\n    })\n    // res.send(ob);\n    \n  }\n  \n})\n  \n    \n\n\nmodule.exports = router;"],"file":"add.dev.js"}