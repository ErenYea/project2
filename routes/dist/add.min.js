"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var express=require("express"),router=express.Router(),mysqlConnection=require("./mysqlconn.js");router.post("/",function(e,r,t){var c,s,a=e.body;if(console.log(a),1==Object.getOwnPropertyNames(a).length)for(key in a)c=key,s=a[key];else c=Object.keys(a)[0],s=a[Object.keys(a)[0]];if("ADD"==s)mysqlConnection.query("select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \n       IS_NULLABLE \n    from INFORMATION_SCHEMA.COLUMNS\n    where TABLE_NAME='".concat(c,"'"),function(e,t,n){if(e)r.send(e);else{if("users"==Object.keys(a)[0])var o=t.slice(0,2);else o=t;t.shift(),r.render("add",{data:o,tablename:c,cond:"add"})}});else if("EDIT"==a[Object.keys(a)[0]])mysqlConnection.query("select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\n      from INFORMATION_SCHEMA.COLUMNS\n      where TABLE_NAME='".concat(a.tablename,"'"),function(e,t,n){e&&r.send(e);var o=t;if(console.log(t),_typeof(a.id)==_typeof([])){var c=a.id[0];i=[a.id[0],Object.keys(a)[0]]}else{c=a.id;i=[a.id,Object.keys(a)[0]]}mysqlConnection.query("select * from ".concat(a.tablename," where ").concat(c,"=").concat(Object.keys(a)[0]),function(e,t,n){console.log("select * from ".concat(a.tablename," where ").concat(s[0],"=").concat(Object.keys(a)[0])),r.render("add",{data:o,rows:t,tablename:a.tablename,cond:"edit",id:i})})});else if("DELETE"==a[Object.keys(a)[0]])mysqlConnection.query("delete from ".concat(a.tablename," where ").concat(a.id[0],"=").concat(Object.keys(a)[0]),function(e,t,n){e?r.send(e):r.redirect("/tables")});else if("VIEW"==a[Object.keys(a)[0]]){var l=[c];mysqlConnection.query("SELECT * from ".concat(c),function(e,t,n){if(e)r.send(e);else{var o=[t];r.render("tables",{title:"Express",data:o,tablenames:l,cond:"view"})}})}else{l=a.tablename;var n=a.selectbox,o=a.search,i=a.id[0];mysqlConnection.query("SELECT * from ".concat(l," where ").concat(n,"='").concat(o,"'"),function(e,t,n){if(e)r.send(e);else{var o=[t];r.render("tables",{title:"Express",data:o,tablenames:[l],cond:"view"})}})}}),module.exports=router;
//# sourceMappingURL=add.min.js.map
