"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var express=require("express"),router=express.Router(),mysqlConnection=require("./mysqlconn.js");router.post("/",function(e,r,o){var c,s,l=e.body;if(console.log(l),1==Object.getOwnPropertyNames(l).length)for(key in l)c=key,s=l[key];else c=Object.keys(l)[0],s=l[Object.keys(l)[0]];if("ADD"==s)console.log("hello"),mysqlConnection.query("select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \n       IS_NULLABLE \n    from INFORMATION_SCHEMA.COLUMNS\n    where TABLE_NAME='".concat(c,"'"),function(e,o,t){if(e)r.send(e);else{if("users"==Object.keys(l)[0])var n=o.slice(0,2);else n=o;console.log(n),r.render("add",{data:n,tablename:c,cond:"add"})}});else if("EDIT"==l[Object.keys(l)[0]])mysqlConnection.query("select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\n      from INFORMATION_SCHEMA.COLUMNS\n      where TABLE_NAME='".concat(l.tablename,"'"),function(e,o,t){e&&r.send(e);var n=o;if(console.log(o),_typeof(l.id)==_typeof([])){var c=l.id[0];id=[l.id[0],Object.keys(l)[0]]}else{c=l.id;id=[l.id,Object.keys(l)[0]]}mysqlConnection.query("select * from ".concat(l.tablename," where ").concat(c,"=").concat(Object.keys(l)[0]),function(e,o,t){console.log("select * from ".concat(l.tablename," where ").concat(s[0],"=").concat(Object.keys(l)[0])),r.render("add",{data:n,rows:o,tablename:l.tablename,cond:"edit",id:id})})});else if("DELETE"==l[Object.keys(l)[0]])mysqlConnection.query("delete from ".concat(l.tablename," where ").concat(l.id[0],"=").concat(Object.keys(l)[0]),function(e,o,t){e?r.send(e):r.redirect("/tables")});else{var a=[c];mysqlConnection.query("SELECT * from ".concat(c),function(e,o,t){if(e)r.send(e);else{var n=[o];r.render("tables",{title:"Express",data:n,tablenames:a,cond:"view"})}})}}),module.exports=router;
//# sourceMappingURL=add.min.js.map
